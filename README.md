# Micro Service

## 如何权衡微服务的利弊？
### 利：
- 强模块化边界
  - 模块化：类 -》 类库 -》 服务模块化
- 可独立部署
  - 不需要团队合作来部署
- 技术多样性
  - 不同的技术团队可以根据自己的技术栈来开发服务

### 弊：
- 分布式复杂性
  - 多个服务，比起一个团队开发的项目，系统会更复杂
  - 一般的团队没办法理解整个系统的运作的
- 最终一致性
  - 数据一致性，比如不同的服务有不同的数据拷贝，数据在某个地方修改了，没有在另外一个地方修改，可能会导致问题
- 运维复杂性
  - 运维需要监控很多个不同的系统
- 测试复杂性
  - 需要测试多个不同的服务，可能需要不同的团队来一起测试

## 康威法则和微服务给架构师怎样的启示？
康威的原文中提出的各定律：
- 第一定律 組織溝通方式會通過系統設計表達出來
- 第二定律 時間再多一件事情也不可能做的完美，但總有時間做完一件事情
- 第三定律 線型系統和線型組織架構間有潛在的異質同態特性
- 第四定律 大的系統組織總是比小系統更傾向於分解

单个团队 - 单个项目 - OK

多个团队 - 单个项目 - 不 OK，沟通成本很高，一个团队迭代新功能需要协同多个团队

多个团队 - 多个服务 - OK，沟通成本降低，方便团队协作，每个团队只需要维护自己的服务，研发效率更高效

## 企业应该在什么时候开始考虑引入微服务？

### 单个项目架构
- 复杂性上升
- 生产力下降

### 微服务架构
- 复杂性上升
- 生产力维持稳定

### 什么时候开始考虑微服务
- 单块优先，一开始的时候做单块，因为单块服务比较快，在验证一个商业模式是否有效地时候，尽快显开发出来，选择单块
- 如果一开始的时候就选择微服务，那么很多的时候把工作的重心放在了微服务的架构上了，而不是商业模式的开发
- 当团队规模变大的时候，考虑将单块项目改成微服务
- 可以逐步把有些模块拆分来做成微服务，逐步的成为完全的微服务

